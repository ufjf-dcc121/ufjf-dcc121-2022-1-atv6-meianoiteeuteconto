<!--
    Algomom
    Mapa com 8 linhas e 23 posições cada linha.
    O jogo deve possuir 15 algomons.
    O jogo possui 4 ginásios.

    v1 - Criar matriz referênciando o mapa algomom;
    v2 - Criar estrutura de impressão do mapa;
    v3 - Desenvolver a movimentação do perso no mapa;
    4 - Intruduzir estrutura "Algomons" para definição dos mesmos;
    5 - Definir Algomons e localidade de cada um. São 15;
    6 - Implementar algodéx a estrutura Personagem.
    6 - Criar de sistema de recompensas (ganhar algomons ao andar nas cidades);
    7 - Criar sistema de cobate nos ginásios de acordo com as regras definidas;
    8 - Testar e reestruturar códigos (--PRIORIZAR RECICLAGEM DE FUNÇÕES--);
-->

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/incon.png" type="image/x-icon">
    <title>ALGOMON</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <div id="game">

    </div>
    <div id="leftcontrol">
        <div id="areacontrol">
            <div id="arrowsdiv">
                <div >
                    <svg width="36" height="31" viewBox="0 0 36 31" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path id="up"
                            d="M19.7948 1.84972L34.6235 27.5338C35.4034 28.8846 34.4285 30.5731 32.8688 30.5731H3.21131C1.65156 30.5731 0.676724 28.8846 1.4566 27.5338L16.2853 1.84972C17.0652 0.498938 19.0149 0.498939 19.7948 1.84972Z"
                            fill="#454545" stroke="black" stroke-width="0.810467" />
                    </svg>
                </div>

                <div >
                    <svg width="31" height="36" viewBox="0 0 31 36" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path id="right"
                            d="M29.1286 19.7948L3.44448 34.6235C2.0937 35.4034 0.40522 34.4285 0.40522 32.8688L0.40522 3.21131C0.40522 1.65156 2.09369 0.676725 3.44447 1.4566L29.1286 16.2853C30.4794 17.0652 30.4794 19.0149 29.1286 19.7948Z"
                            fill="#454545" stroke="black" stroke-width="0.810467" />
                    </svg>
                </div>

                <div >
                    <svg width="36" height="31" viewBox="0 0 36 31" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path id="down"
                            d="M16.2853 29.1286L1.4566 3.44448C0.676727 2.09371 1.65157 0.405235 3.21131 0.405235L32.8688 0.405235C34.4285 0.405235 35.4034 2.09371 34.6235 3.44449L19.7948 29.1286C19.0149 30.4794 17.0652 30.4794 16.2853 29.1286Z"
                            fill="#454545" stroke="black" stroke-width="0.810467" />
                    </svg>
                </div>

                <div >
                <svg width="31" height="36" viewBox="0 0 31 36" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path id="left"
                            d="M1.84972 16.2853L27.5338 1.4566C28.8846 0.676727 30.5731 1.65157 30.5731 3.21131V32.8688C30.5731 34.4285 28.8846 35.4034 27.5338 34.6235L1.84972 19.7948C0.498938 19.0149 0.498939 17.0652 1.84972 16.2853Z"
                            fill="#454545" stroke="black" stroke-width="0.810467" />
                    </svg>
                </div>
            
            </div>
        </div>
    </div>
    <div id="rightcontrol">

    </div>
    </div>

    <script>
        'use strict';

        var perso = {
            insignias: 0,
            algomons: {},
            ln: 0,
            cl: 0
        }, 
        mapa = [
            ['Z', ' ', ' ', ' ', ' ', ' ', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ['|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '#', '-', '-', '-', '-', '-', '#', ' ', ' ', ' ', ' '],
            ['|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' '],
            ['#', '-', '-', '-', '-', '-', 'A', '-', '-', '-', '-', '-', '#', '-', '-', '-', '-', '-', '#', '-', '-', '-', 'X'],
            [' ', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|'],
            [' ', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', '#', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '#'],
            [' ', ' ', ' ', ' ', ' ', ' ', '|', ' ', ' ', ' ', '|', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ['Y', '-', '-', '-', '-', '-', '#', '-', '-', '-', '#', '-', '-', '-', '-', '-', '#', '-', '-', '-', '-', '-', 'R']
        ], 
        cidatual = '?';

        const imprimirMapa = () => {
            const game = document.querySelector("#game");
            game.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                for(let j = 0; j < 23; j++) {
                    game.innerHTML += 
                    `
                        <div>
                            <h1>${mapa[i][j]}</h1>
                        </div>
                    `;
                };  
            };
        };

        const verificaCidAtual = () => {
            if (cidatual == '#' || cidatual == '+' ||   cidatual == '?'){
                mapa[perso.ln][perso.cl] = '+';
            } else if ("ZYXR".includes(cidatual)) {
                mapa[perso.ln][perso.cl] = cidatual;
            }
        }

        const movimento = mov => {
            for(let i = 0; i < 8; i++) {
                for(let j = 0; j < 23; j++) {
                    if(mapa[i][j] == 'A') {
                        perso.ln = i;
                        perso.cl = j;
                    }
                }
            }

            switch (mov) {
                case 'left':
                    for(let i = perso.cl-1; i >= 0; i--){
                        if(mapa[perso.ln][i] != '-' && mapa[perso.ln][i] != '|' && mapa[perso.ln][i] != ' ') {
                            verificaCidAtual();
                            cidatual = mapa[perso.ln][i];
                            mapa[perso.ln][i] = 'A';
                            break;
                        } else if(mapa[perso.ln][i] == ' ') {
                            break;
                        }
                    }
                    break;
                
                case 'right':
                    for(let i = perso.cl+1; i < 23; i++){
                            if(mapa[perso.ln][i] != '-' && mapa[perso.ln][i] != '|' && mapa[perso.ln][i] != ' ') {
                            verificaCidAtual();
                            cidatual = mapa[perso.ln][i];
                            mapa[perso.ln][i] = 'A';
                            break;
                        } else if (mapa[perso.ln][i] == ' '){
                            break;
                        }
                    }
                    break;

                case 'up':
                    for(let i = perso.ln-1; i >= 0; i--){
                            if(mapa[i][perso.cl] != '-' && mapa[i][perso.cl] != '|' && mapa[i][perso.cl] != ' ') {
                            verificaCidAtual();
                            cidatual = mapa[i][perso.cl];
                            mapa[i][perso.cl] = 'A';
                            break;
                        } else if(mapa[i][perso.cl] == ' ') {
                            break;
                        }
                    }
                    break;

                case 'down':
                    for(let i = perso.ln+1; i < 8; i++){
                            if(mapa[i][perso.cl] != '-' && mapa[i][perso.cl] != '|' && mapa[i][perso.cl] != ' ') {
                            verificaCidAtual();
                            cidatual = mapa[i][perso.cl];
                            mapa[i][perso.cl] = 'A';
                            break;
                        } else if(mapa[i][perso.cl] == ' ') {
                            break;
                        }
                    }
                    break;
            }
            imprimirMapa();
        }
 
        window.addEventListener('load', () => {
            imprimirMapa();
        });

        const up = document.querySelector("#up");
        const down = document.querySelector("#down");
        const left = document.querySelector("#left");
        const right = document.querySelector("#right");

        /*
        void verificaCidAtual() {
            if (cidatual == '#' || cidatual == '+' || cidatual == '?'){
                mapa[perso.ln][perso.cl] = '+';
            } else if (cidatual >= 65 && cidatual <= 90) {
                mapa[perso.ln][perso.cl] = cidatual;
            }
            }

            void movimento(char mov) {
                for(i = 0; i < 8; i++) {
                    for(j = 0; j < 23; j++) {
                    if(mapa[i][j] == 'A') {
                        perso.ln = i;
                        perso.cl = j;
                    }
                    }
                }
            
                switch (mov) {
                    case 'a':
                    for(i = perso.cl-1; i >= 0; i--){
                        if(mapa[perso.ln][i] != '-' && mapa[perso.ln][i] != '|' && mapa[perso.ln][i] != ' ') {
                        verificaCidAtual();
                        cidatual = mapa[perso.ln][i];
                        mapa[perso.ln][i] = 'A';
                        break;
                        } else if(mapa[perso.ln][i] == ' ') {
                        break;
                        }
                    }
                    break;

                    
                    case 'd':
                    for(i = perso.cl+1; i < 23; i++){
                        if(mapa[perso.ln][i] != '-' && mapa[perso.ln][i] != '|' && mapa[perso.ln][i] != ' ') {
                        verificaCidAtual();
                        cidatual = mapa[perso.ln][i];
                        mapa[perso.ln][i] = 'A';
                        break;
                        } else if (mapa[perso.ln][i] == ' '){
                        break;
                        }
                    }
                    break;


                    case 'w':
                    for(i = perso.ln-1; i >= 0; i--){
                        if(mapa[i][perso.cl] != '-' && mapa[i][perso.cl] != '|' && mapa[i][perso.cl] != ' ') {
                        verificaCidAtual();
                        cidatual = mapa[i][perso.cl];
                        mapa[i][perso.cl] = 'A';
                        break;
                        } else if(mapa[i][perso.cl] == ' ') {
                        break;
                        }
                    }
                    break;

                    case 's':
                    for(i = perso.ln+1; i < 8; i++){
                        if(mapa[i][perso.cl] != '-' && mapa[i][perso.cl] != '|' && mapa[i][perso.cl] != ' ') {
                        verificaCidAtual();
                        cidatual = mapa[i][perso.cl];
                        mapa[i][perso.cl] = 'A';
                        break;
                        } else if(mapa[i][perso.cl] == ' ') {
                        break;
                        }
                    }
                    break;
                }
            }
        }*/
    </script>
</body>
</html>